;             
CREATE USER IF NOT EXISTS SA SALT 'd872633c0c430cdd' HASH '28e2b4ebaeb3c57403b1a5c9be00f311acff0375ffa54758b6eb9eae68f85c8e' ADMIN;           
CREATE SCHEMA IF NOT EXISTS TESTSHOP AUTHORIZATION SA;        
CREATE SEQUENCE TESTSHOP.HIBERNATE_SEQUENCE START WITH 1;     
CREATE SEQUENCE TESTSHOP.SYSTEM_SEQUENCE_0032E78F_1F83_4905_BBAB_78D161E93CC7 START WITH 1 BELONGS_TO_TABLE;  
CREATE SEQUENCE TESTSHOP.SYSTEM_SEQUENCE_E2B934D3_9519_4AA1_A6F4_CE1A238F7C8F START WITH 1 BELONGS_TO_TABLE;  
CREATE SEQUENCE TESTSHOP.SYSTEM_SEQUENCE_57C2E2B2_5134_4553_BED2_A7B145684936 START WITH 4 BELONGS_TO_TABLE;  
CREATE CACHED TABLE PUBLIC."flyway_schema_history"(
    "installed_rank" INT NOT NULL,
    "version" VARCHAR(50),
    "description" VARCHAR(200) NOT NULL,
    "type" VARCHAR(20) NOT NULL,
    "script" VARCHAR(1000) NOT NULL,
    "checksum" INT,
    "installed_by" VARCHAR(100) NOT NULL,
    "installed_on" TIMESTAMP DEFAULT CURRENT_TIMESTAMP() NOT NULL,
    "execution_time" INT NOT NULL,
    "success" BOOLEAN NOT NULL
);             
ALTER TABLE PUBLIC."flyway_schema_history" ADD CONSTRAINT PUBLIC."flyway_schema_history_pk" PRIMARY KEY("installed_rank");    
-- 2 +/- SELECT COUNT(*) FROM PUBLIC."flyway_schema_history"; 
CREATE INDEX PUBLIC."flyway_schema_history_s_idx" ON PUBLIC."flyway_schema_history"("success");               
CREATE CACHED TABLE TESTSHOP.CUSTOMERS(
    CUSTOMER_ID INTEGER DEFAULT (NEXT VALUE FOR TESTSHOP.SYSTEM_SEQUENCE_0032E78F_1F83_4905_BBAB_78D161E93CC7) NOT NULL NULL_TO_DEFAULT SEQUENCE TESTSHOP.SYSTEM_SEQUENCE_0032E78F_1F83_4905_BBAB_78D161E93CC7,
    FIRST_NAME VARCHAR(255),
    LAST_NAME VARCHAR(255),
    USER_NAME VARCHAR(255)
);           
ALTER TABLE TESTSHOP.CUSTOMERS ADD CONSTRAINT TESTSHOP.CONSTRAINT_6 PRIMARY KEY(CUSTOMER_ID); 
-- 0 +/- SELECT COUNT(*) FROM TESTSHOP.CUSTOMERS;             
CREATE CACHED TABLE TESTSHOP.LOCATION(
    LOCATION_ID INTEGER NOT NULL,
    CITY VARCHAR(255),
    COUNTRY VARCHAR(255),
    COUNTY VARCHAR(255),
    STREET_ADDRESS VARCHAR(255),
    NAME VARCHAR(255)
);           
ALTER TABLE TESTSHOP.LOCATION ADD CONSTRAINT TESTSHOP.CONSTRAINT_9 PRIMARY KEY(LOCATION_ID);  
-- 0 +/- SELECT COUNT(*) FROM TESTSHOP.LOCATION;              
CREATE CACHED TABLE TESTSHOP.ORDER_DETAIL(
    QUANTITY INTEGER,
    ORDER_ID INTEGER NOT NULL,
    PRODUCT_ID INTEGER NOT NULL
);        
ALTER TABLE TESTSHOP.ORDER_DETAIL ADD CONSTRAINT TESTSHOP.CONSTRAINT_4 PRIMARY KEY(ORDER_ID, PRODUCT_ID);     
-- 0 +/- SELECT COUNT(*) FROM TESTSHOP.ORDER_DETAIL;          
CREATE CACHED TABLE TESTSHOP.ORDERS(
    ORDER_ID INTEGER NOT NULL,
    CITY VARCHAR(255),
    COUNTRY VARCHAR(255),
    COUNTY VARCHAR(255),
    STREET_ADDRESS VARCHAR(255),
    DATE TIMESTAMP,
    CUSTOMER_ID INTEGER NOT NULL,
    SHIPPED_FROM_LOCATION_ID INTEGER
);         
ALTER TABLE TESTSHOP.ORDERS ADD CONSTRAINT TESTSHOP.CONSTRAINT_8 PRIMARY KEY(ORDER_ID);       
-- 0 +/- SELECT COUNT(*) FROM TESTSHOP.ORDERS;
CREATE CACHED TABLE TESTSHOP.PRODUCT(
    PRODUCT_ID INTEGER NOT NULL,
    DESCRIPTION VARCHAR(255),
    NAME VARCHAR(255),
    PRICE DECIMAL(19, 2),
    WEIGHT DECIMAL(19, 2),
    CATEGORY_ID INTEGER,
    SUPPLIER_ID INTEGER
);  
ALTER TABLE TESTSHOP.PRODUCT ADD CONSTRAINT TESTSHOP.CONSTRAINT_1 PRIMARY KEY(PRODUCT_ID);    
-- 0 +/- SELECT COUNT(*) FROM TESTSHOP.PRODUCT;               
CREATE CACHED TABLE TESTSHOP.PRODUCT_CATEGORY(
    CATEGORY_ID INTEGER DEFAULT (NEXT VALUE FOR TESTSHOP.SYSTEM_SEQUENCE_57C2E2B2_5134_4553_BED2_A7B145684936) NOT NULL NULL_TO_DEFAULT SEQUENCE TESTSHOP.SYSTEM_SEQUENCE_57C2E2B2_5134_4553_BED2_A7B145684936,
    DESCRIPTION VARCHAR(255),
    NAME VARCHAR(255)
);     
ALTER TABLE TESTSHOP.PRODUCT_CATEGORY ADD CONSTRAINT TESTSHOP.CONSTRAINT_3 PRIMARY KEY(CATEGORY_ID);          
-- 3 +/- SELECT COUNT(*) FROM TESTSHOP.PRODUCT_CATEGORY;      
CREATE CACHED TABLE TESTSHOP.REVENUE(
    REVENUE_ID INTEGER NOT NULL,
    LOCAL_DATE_TIME TIMESTAMP,
    SUM DECIMAL(19, 2),
    LOCATION_ID INTEGER
); 
ALTER TABLE TESTSHOP.REVENUE ADD CONSTRAINT TESTSHOP.CONSTRAINT_6C PRIMARY KEY(REVENUE_ID);   
-- 0 +/- SELECT COUNT(*) FROM TESTSHOP.REVENUE;               
CREATE CACHED TABLE TESTSHOP.SHIPPING_INFO(
    ID INTEGER DEFAULT (NEXT VALUE FOR TESTSHOP.SYSTEM_SEQUENCE_E2B934D3_9519_4AA1_A6F4_CE1A238F7C8F) NOT NULL NULL_TO_DEFAULT SEQUENCE TESTSHOP.SYSTEM_SEQUENCE_E2B934D3_9519_4AA1_A6F4_CE1A238F7C8F,
    QUANTITY INTEGER NOT NULL,
    LOCATION_ID INTEGER,
    ORDER_ID INTEGER,
    PRODUCT_ID INTEGER
);              
ALTER TABLE TESTSHOP.SHIPPING_INFO ADD CONSTRAINT TESTSHOP.CONSTRAINT_D PRIMARY KEY(ID);      
-- 0 +/- SELECT COUNT(*) FROM TESTSHOP.SHIPPING_INFO;         
CREATE CACHED TABLE TESTSHOP.STOCK(
    QUANTITY INTEGER,
    LOCATION_ID INTEGER NOT NULL,
    PRODUCT_ID INTEGER NOT NULL
);            
ALTER TABLE TESTSHOP.STOCK ADD CONSTRAINT TESTSHOP.CONSTRAINT_4B PRIMARY KEY(LOCATION_ID, PRODUCT_ID);        
-- 0 +/- SELECT COUNT(*) FROM TESTSHOP.STOCK; 
CREATE CACHED TABLE TESTSHOP.SUPPLIER(
    SUPPLIER_ID INTEGER NOT NULL,
    NAME VARCHAR(255)
);          
ALTER TABLE TESTSHOP.SUPPLIER ADD CONSTRAINT TESTSHOP.CONSTRAINT_C PRIMARY KEY(SUPPLIER_ID);  
-- 0 +/- SELECT COUNT(*) FROM TESTSHOP.SUPPLIER;              
ALTER TABLE TESTSHOP.ORDERS ADD CONSTRAINT TESTSHOP.FKPXTB8AWMI0DK6SMOH2VP1LITG FOREIGN KEY(CUSTOMER_ID) REFERENCES TESTSHOP.CUSTOMERS(CUSTOMER_ID) NOCHECK;  
ALTER TABLE TESTSHOP.PRODUCT ADD CONSTRAINT TESTSHOP.FK2KXVBR72TMTSCJVYP9YQB12BY FOREIGN KEY(SUPPLIER_ID) REFERENCES TESTSHOP.SUPPLIER(SUPPLIER_ID) NOCHECK;  
ALTER TABLE TESTSHOP.ORDER_DETAIL ADD CONSTRAINT TESTSHOP.FKB8BG2BKTY0OKSA3WIQ5MP5QNC FOREIGN KEY(PRODUCT_ID) REFERENCES TESTSHOP.PRODUCT(PRODUCT_ID) NOCHECK;
ALTER TABLE TESTSHOP.SHIPPING_INFO ADD CONSTRAINT TESTSHOP.FK45IDK6ACNNFDITXGYYK613M6R FOREIGN KEY(ORDER_ID) REFERENCES TESTSHOP.ORDERS(ORDER_ID) NOCHECK;    
ALTER TABLE TESTSHOP.SHIPPING_INFO ADD CONSTRAINT TESTSHOP.FKA9Y078XF8PIPD874T8DFTSRRY FOREIGN KEY(LOCATION_ID) REFERENCES TESTSHOP.LOCATION(LOCATION_ID) NOCHECK;            
ALTER TABLE TESTSHOP.PRODUCT ADD CONSTRAINT TESTSHOP.FK5CYPB0K23BOVO3RN1A5JQS6J4 FOREIGN KEY(CATEGORY_ID) REFERENCES TESTSHOP.PRODUCT_CATEGORY(CATEGORY_ID) NOCHECK;          
ALTER TABLE TESTSHOP.ORDERS ADD CONSTRAINT TESTSHOP.FKJGK8FK0W119K8U9XH4CPMNFBO FOREIGN KEY(SHIPPED_FROM_LOCATION_ID) REFERENCES TESTSHOP.LOCATION(LOCATION_ID) NOCHECK;      
ALTER TABLE TESTSHOP.STOCK ADD CONSTRAINT TESTSHOP.FKJGHKVW2SNNSR5GPCT0OF7XFCF FOREIGN KEY(PRODUCT_ID) REFERENCES TESTSHOP.PRODUCT(PRODUCT_ID) NOCHECK;       
ALTER TABLE TESTSHOP.REVENUE ADD CONSTRAINT TESTSHOP.FK6XUKEPD8SSA1OK6IAKKHP83P7 FOREIGN KEY(LOCATION_ID) REFERENCES TESTSHOP.LOCATION(LOCATION_ID) NOCHECK;  
ALTER TABLE TESTSHOP.SHIPPING_INFO ADD CONSTRAINT TESTSHOP.FKBQ6DQX4GQ3T6TTY5Y1A6PNALV FOREIGN KEY(PRODUCT_ID) REFERENCES TESTSHOP.PRODUCT(PRODUCT_ID) NOCHECK;               
ALTER TABLE TESTSHOP.ORDER_DETAIL ADD CONSTRAINT TESTSHOP.FKRWS2Q0SI6OYD6IL8GQE2AENNC FOREIGN KEY(ORDER_ID) REFERENCES TESTSHOP.ORDERS(ORDER_ID) NOCHECK;     
ALTER TABLE TESTSHOP.STOCK ADD CONSTRAINT TESTSHOP.FK6T3M0KAF6FUBUUS331GF7XMN8 FOREIGN KEY(LOCATION_ID) REFERENCES TESTSHOP.LOCATION(LOCATION_ID) NOCHECK;    
